---
title: "Analysis of rock music over time (1962 - 2009)"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
    storyboard: false
---
```{r setup, include=FALSE}
library(tidyverse)
library(spotifyr)
library(ggplot2)
library(plotly)
library(flexdashboard)
library(readr)
library(leaflet)
library(DT)
library(lubridate)


# Initializing the corpus
Sys.setenv(SPOTIFY_CLIENT_ID = '4a10e40fdb7a4ec7ae3a8bade60021fd')
Sys.setenv(SPOTIFY_CLIENT_SECRET = '5e0729383c7741feb83d455e9185d417')
access_token <- get_spotify_access_token()
rock_corpus <- get_playlist_audio_features("", "6afJzgJnlHrCa0imChp47P")

# Filter and mutate the dataframe so that it contains new columns; year, decade, duration in minutes.
songs_with_decade <- rock_corpus %>%
  mutate(year = as.numeric(substring(track.album.release_date, 1, 4))) %>%
  mutate(decade = floor(as.numeric(substring(track.album.release_date, 1, 4)) / 10) * 10) %>%
  mutate(duration_min = track.duration_ms / 60000) %>%
  filter(decade != 2010)

# Plot allocated to variable
track_duration_plot <- ggplot(songs_with_decade, aes(x = year, y = duration_min)) + geom_point() + scale_y_log10() + geom_smooth(method = "lm", formula = y ~ poly(x, 4), se = FALSE) + xlab("Year") + ylab("Track duration (minutes)") + ggtitle("Track duration in rock music per year (1962 - 2009)")
```

Introduction
===============================================


Column
-----------------------------------------------------

### Setup of corpus analysis

#### How has rock music changed over time?

Rock music has been a genre that has undergone lots of transformations since its start in the 1950s and 1960s. The evolution of rock music can be divided into several decades, including the 60s, 70s, 80s, 90s, and 00s. In this portfolio, I will be exploring how rock music changed during these decades, and what makes each decade unique.

##### Corpus

The corpus for this portfolio will be a selection of popular rock songs from each decade, chosen based on the top search result in Spotify. These songs have been put together into one playlist containing 432 tracks, totalling up to almost 30 hours of playtime. The corpus includes a mix of well known and lesser known tracks, and covers a variety of sub genres within the rock music genre.

##### Comparison Points

It is expected that there will be differences between each decade in terms of musical styles, instrumentation, and production techniques, but some similarities may also be present. For example, the use of guitar, bass, and drums as the core instruments in rock music has remained consistent throughout the years. This portfolio aims to explore the changes over time and provide a comprehensive overview of the history of rock music.

Track duration {data-navmenu=Visualization}
==================================================

### {data-width=300}

#### Trend in track duration
This plot displays the duration of 432 rock music tracks released over the period 1960 - 2010, with the x-axis indicating the year of release and the y-axis the track duration The plot also includes a trend line that shows a peak in 1982. Upon analyzing the plot, we can observe that there is a trend towards shorter song durations. If this trend continues, songs may become increasingly shorter in the future. It would be interesting to include more recent songs to see if this trend is still consistent with current rock music releases. This plot has significant implications for the music industry, as it highlights the evolving preferences of listeners towards shorter tracks. As such, it could be useful for music producers and artists in determining the optimal length of their tracks.

### {data-width=700}
```{r}
ggplotly(track_duration_plot)
```

Change in valence {data-navmenu=Visualization}
==================================================


Conclusion
==================================================


Discussion
==================================================
